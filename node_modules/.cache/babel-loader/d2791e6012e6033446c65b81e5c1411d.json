{"ast":null,"code":"import _slicedToArray from \"/Users/xuqian/Desktop/reactStudy/reactHooks/reactHookTodos/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/xuqian/Desktop/reactStudy/reactHooks/reactHookTodos/src/App.js\";\nimport React, { useState } from 'react';\nimport TodoHeader from './Todo/TodoHeader';\nimport TodoBody from './Todo/TodoBody';\nimport TodoFooter from './Todo/TodoFooter';\nimport './App.css';\n\nconst ToDoDemo = () => {\n  const getInitData = () => {\n    return localStorage.getItem('todoListData') ? JSON.parse(localStorage.getItem('todoListData')) : [];\n  };\n\n  const _useState = useState(getInitData()),\n        _useState2 = _slicedToArray(_useState, 2),\n        todoList = _useState2[0],\n        setTodoList = _useState2[1];\n\n  const saveDataInLocal = data => {\n    localStorage.setItem('todoListData', JSON.stringify(data));\n  };\n\n  const addTodo = value => {\n    setTodoList(prev => {\n      saveDataInLocal([{\n        value: value,\n        isDone: false\n      }, ...prev]);\n      return [{\n        value: value,\n        isDone: false\n      }, ...prev];\n    });\n  };\n\n  const deleteTodo = index => {\n    setTodoList(prev => {\n      prev.splice(index, 1);\n      saveDataInLocal([...prev]);\n      return [...prev];\n    });\n  };\n\n  const clearDone = () => {\n    setTodoList(prev => {\n      prev = prev.filter(i => !i.isDone);\n      saveDataInLocal([...prev]);\n      return [...prev];\n    });\n  };\n\n  const changeTodoStatus = index => {\n    setTodoList(prev => {\n      prev[index].isDone = !prev[index].isDone;\n      saveDataInLocal([...prev]);\n      return [...prev];\n    });\n  };\n\n  const checkedAll = () => {\n    const isAllChecked = todoList.every(t => t.isDone);\n    setTodoList(prev => {\n      prev.forEach(p => {\n        p.isDone = isAllChecked ? false : true;\n      });\n      saveDataInLocal([...prev]);\n      return [...prev];\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"todo-list-demo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(TodoHeader, {\n    addTodo: addTodo,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }), React.createElement(TodoBody, {\n    todoList: todoList,\n    deleteTodo: deleteTodo,\n    changeTodoStatus: changeTodoStatus,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), React.createElement(TodoFooter, {\n    todoList: todoList,\n    clearDone: clearDone,\n    checkedAll: checkedAll,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }));\n};\n\nexport default ToDoDemo;","map":{"version":3,"sources":["/Users/xuqian/Desktop/reactStudy/reactHooks/reactHookTodos/src/App.js"],"names":["React","useState","TodoHeader","TodoBody","TodoFooter","ToDoDemo","getInitData","localStorage","getItem","JSON","parse","todoList","setTodoList","saveDataInLocal","data","setItem","stringify","addTodo","value","prev","isDone","deleteTodo","index","splice","clearDone","filter","i","changeTodoStatus","checkedAll","isAllChecked","every","t","forEach","p"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport TodoHeader from './Todo/TodoHeader';\nimport TodoBody from './Todo/TodoBody';\nimport TodoFooter from './Todo/TodoFooter';\nimport './App.css'\n\n\nconst ToDoDemo = () => {\n\n\tconst getInitData = () => {\n\t\treturn localStorage.getItem('todoListData') ? JSON.parse(localStorage.getItem('todoListData')) : []\n\t}\n\n\tconst [todoList, setTodoList] = useState(getInitData())\n\n\tconst saveDataInLocal = (data) => {\n\t\tlocalStorage.setItem('todoListData', JSON.stringify(data))\n\t}\n\n\tconst addTodo = (value) => {\n\t\tsetTodoList(prev => {\n\t\t\tsaveDataInLocal([{value: value, isDone: false}, ...prev])\n\t\t\treturn [{value: value, isDone: false}, ...prev]\n\t\t})\n\t}\n\n\tconst deleteTodo = (index) => {\n\t\tsetTodoList(prev => {\n\t\t\tprev.splice(index, 1);\n\t\t\tsaveDataInLocal([...prev])\n\t\t\treturn [...prev]\n\t\t})\n\t}\n\t\n\tconst clearDone = () => {\n\t\tsetTodoList(prev => {\n\t\t\tprev = prev.filter(i => !i.isDone);\n\t\t\tsaveDataInLocal([...prev])\n\t\t\treturn [...prev]\n\t\t})\n\t}\n\n\tconst changeTodoStatus = (index) => {\n\t\tsetTodoList(prev => {\n\t\t\tprev[index].isDone = !prev[index].isDone;\n\t\t\tsaveDataInLocal([...prev])\n\t\t\treturn [...prev]\n\t\t})\n\t}\n\n\tconst checkedAll = () => {\n\t\tconst isAllChecked = todoList.every(t => t.isDone)\n\t\tsetTodoList(prev => {\n\t\t\tprev.forEach(p => {\n\t\t\t\tp.isDone = isAllChecked ? false : true\n\t\t\t})\n\t\t\tsaveDataInLocal([...prev])\n\t\t\treturn [...prev]\n\t\t})\n\t}\n\n\treturn <div className=\"todo-list-demo\">\n\t\t<TodoHeader addTodo={addTodo} />\n\t\t<TodoBody todoList={todoList} deleteTodo={deleteTodo} changeTodoStatus={changeTodoStatus} />\n\t\t<TodoFooter todoList={todoList} clearDone={clearDone} checkedAll={checkedAll} />\n\t</div>\n}\n\nexport default ToDoDemo;\n\n"]},"metadata":{},"sourceType":"module"}